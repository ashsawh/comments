$('[data-toggle="collapse"]').on('click', function() {
    var $this = $(this),
        $parent = typeof $this.data('parent')!== 'undefined' ? $($this.data('parent')) : undefined;
    if($parent === undefined) { /* Just toggle my  */
        $this.find('.glyphicon').toggleClass('glyphicon-plus glyphicon-minus');
        return true;
    }

    /* Open element will be close if parent !== undefined */
    var currentIcon = $this.find('.glyphicon');
    currentIcon.toggleClass('glyphicon-plus glyphicon-minus');
    $parent.find('.glyphicon').not(currentIcon).removeClass('glyphicon-minus').addClass('glyphicon-plus');

});

$("#commentSend").click(function(e) {
    e.preventDefault();
    console.log("testing");
    var comment = $("#addComment #commentBody");
    if(comment.length > 0) {
        var postData = {
            'content': $("#commentBody").val(),
            'title': $("#commentBody").val(),
            'productId': $("#product").data("productId"),
            'userId': $("#userInfo").data("userId")
        };
        $.ajax({
            type: "POST",
            url: "/comments",
            dataType: "json",
            data: postData,
            success: function (msg) {
                if (msg) {
                    $("#flashMessage").text("New comment has been added.");
                    $("#flashMessage").addClass("success");
                    location.reload();
                } else {
                    $("#flashMessage").text("Error! Unable to add comment.");
                    $("#flashMessage").addClass("failure");
                    location.reload();
                }
            }
        });
    }
});